<?php $this->beginWidget('CMarkdown'); ?>
## Chapter 10 复制与粘贴
### Tip 59 用无名寄存器实现删除、复制与粘贴操作

在 Vim 中我们操作的是寄存器，不是剪切板。

1. **调换字符`xp`**
  `xp` 用来调换光标之后的两个字符，typo 中有很多都是两个字母的顺序颠倒，
要调换连个字母的顺序很简单。命令由`x`和`p`组合而成，这里要记住这个组合。
2. **调换文本行`ddp`**
调整两行间的顺序，自己好像习惯用`Vxp`,这里的方法可以少按一个按键。
3. **创建文本行副本`yyp`**

### Tip 60 深入理解 Vim 寄存器

#### 1 引用一个寄存器`"{register}`

Vim 中不止一个寄存器，上节用的都叫无名寄存器，我们可以使用`"{register}`
命令来指定寄存器，不指定的话，用的就是无名寄存器。

Vim 内置的寄存器和 Windows 下剪贴板的一个区别就是：它即使在系统重启后仍在存在，
而window下的剪贴板在重启后后没有了。

#### 2 无名寄存器`""`
`""p`=`p`. 无名寄存器中的内容是很容易被覆盖掉的。
`x`,`s`,`d{motion}`,`c{motion}`与`y{motion}`都会覆盖无名寄存器中的内容。
因此我们说无名寄存器易变的。
#### 3 复制专用寄存器`"0`
顾名思义，“复制专用寄存器”是专门提供给`y{motion}`的。当我们使用`y{motion}`
命令时，无名寄存器和复制专用寄存器中同时会保留一份备份。
接下来如果执行一条`c`命令，存储在无名寄存器中的备份将被覆盖，
而存储在复制专用寄存器中的备份则不会受到影响。
#### 4 查看寄存器中的信息`:reg [number]`
假如我们想查看复制专用寄存器中的内容，可以使用`:reg 0`。
直接输入`:reg`会显示所有寄存器中的内容。
#### 5 有名寄存器`"a - "z`
这个功能是先在优酷上的一个 Vim 视频上发现，后看到本节的内容，因此印象深刻。
学到这个功能的第一反应就是：它可以应用到 Pratical Vim 读书笔记中！
笔记中经常要写标题，每写一个新的章节都得手动`yyp`太麻烦，其实可以将 Chapter
标题存在`"a`寄存器内，Tip 标题存在`"b`内，子标题存在`"c`内，
而表格模板就存在`"d`内。这样一来，开始写新章节就`"ap`,新的 Tip 就`"bp`,
新的子标题就`"cp`,需要插入表格了就`"dp`真是太方便了！
#### 6 黑洞寄存器`"_`
黑洞寄存器是个“又去无回”的地方，有点”彻底删除“的意思。如果我们只是想删除内容，
不想覆盖无名寄存器时，这条命令很管用。
#### 7 系统剪贴板`"+`**在Debian下不能用**
前面5种寄存器都是 Vim 内部的，如果想从 Vim 中复制文本到外部应用程序（反之亦然）
，就需要用到系统剪贴板，这个外部寄存器用`"+`来表示。

该功能在 Debian 下不可用的原因很可能是 Vim 版本的问题。
P.139 讲到 X11 Clipboard 不可用的证据是
`:version`中`xterm_clipboard`前面有`-`，表示功能不可用。
另外P.147中有如下一段话：

> 如果你运行的 Vim 是已集成系统剪贴板的版本……

这两处表明很可能跟 Vim 版本有关。
#### 8 表达式寄存器`"=`
其它的寄存器都是用来存储一段文字内容，而表达式寄存器不是，它可以接受一段Vim
脚本，并将输出内容显示出来。那个在 Vim 中使用计算器的功能用的就是表达式寄存器。

在插入模式下输入：

	<C-r>={需要计算的公式}<CR>
#### 9 其它只读寄存器 P.140
比较有用的是`"%`这个寄存器，它里面存储的是当前文件的文件名，
在普通模式下输入`"%p`可直接将文件名输出到当前光标处。

### Tip 61 用寄存器中的内容替换高亮选区中的文本 P.140

`p`命令通常都在普通模式下执行，在可视模式下，正如预想的那样，
它能将高亮显示的区域替换成指定寄存器中的内容。

本节有一个例子用来将下面一句话中的 'fish' 和 'chips' 互换位置

	I like fish and chips.
本例中综合使用了多个技巧，值得再看。

### Tip 62 把寄存器中的内容粘贴出来 `[g]p`, `[g]P`, `<C-r>"{register}`P.142
粘贴的内容分以字符为单位和以行为单位两种，这取决于存入寄存器时的格式。
以行为单位的内容用`p`或`P`粘贴很方便，以字符为单位的内容在插入模式下也可以用
`<C-r>"{register}`命令。

对行粘贴来说，`gp`, `gP` 也很有用，加上`g`前缀后，
可以将光标移动到新粘贴的行的末行，而默认的光标是在粘贴文本的首行。
在复制多行文本时，`gP`尤为管用。

### Tip 63 与系统剪贴板进行交互P.145
#### 1 为什么从外部应用程序往Vim中粘贴问题必须要用`Ctrl`-`Shift`-`v`？
本节指出了为什么在外部应用程序中（如浏览器）复制的文本粘贴到 Vim 
中为什么必须用`Ctrl`-`Shift`-`v`命令，因为`<C-v>`在普通模式下表示激活可视模式，
而在插入模式下，这个命令也有自己的定义：插入字符编码。

#### 2 粘贴多行代码缩进出错的解决方法
如果从外部程序中复制的文本是具有缩进的多行文本（如代码），
那么粘贴到 Vim 中后缩进将被打乱，一个解决方法是在`.vimrc`文件中加入如下设置：

	:set pastetoggle=<f5>
设置好后，在粘贴代码之前，先按下`F5`,再用`Ctrl`-`Shift`-`v`粘贴，
代码的缩进就正常了。

## Chapter 11 宏（Macros）P.148
### Tip 64 宏的读取与执行`q{register}`, `q`, `@{register}`, `@@`
`q`既是录制按钮，也是停止按钮。开始录制时按`q{register}`,结束录制按`q`.
执行录制按`@{register}`,执行上一次宏按`@@`.

在命令序列中，`^[`代表`Esc`键。

宏的执行有多种方式，类似电路中的串并联，以”串行方式“执行的宏脆弱，
以”并行方式“执行的宏更健壮。
### Tip 65 规范光标位置、直达目标以及中止宏P.151
黄金法则：

> 在录制宏时，要确保每条命令都可被重复执行。
<?php $this->endWidget('CMarkdown'); ?>
