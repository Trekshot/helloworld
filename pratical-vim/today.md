
## Chapter 14 替换（Substitute）
### Tip 87 结识substitute命令P.199
命令语法：

	:[range]s[ubstitute]/{pattern}/{string}/[flags]
要点：
- `[range]`的规则适用于所有 Ex 命令；
- 利用标志位（`[flags]`）调整 substitute 命令的行为：`:h s_flags`:
	- `g`: 在全局（准确地说，是“一整行”）范围执行替换；
	- `c`: 交互，每次替换前都询问；
	- `n`: 抑制正常的替换行为；
	- `e`: 屏蔽未找到模式的错误提示；
	- `&`: 让Vim重复使用上一次`:substitute`中用的标志位；
- `{string}`替换域中的特殊字符（完整列表参考`:h sub-replace-special`）

### Tip 88 在文件范围内查找并替换每一处匹配P.203
通常`g`标志位被理解为“全局”的意思，其实这里有误解，正确的理解是“一整行”。
`g`让替换以横轴方向扩展；`[range]`让替换以纵轴方向扩展。

### Tip 89 手动控制每一次替换操作P.205
`c`可以完成。这里说一下自己尚不知道的回复选项，目前只知道`y`,`n`，
其实还有很多，参考`:h :s_c`:

- `q`: 退出替换过程；
- `l`: "last", 替换此处匹配后直接退出
- `a`: "all", 替换此处与之后所有的匹配
- `<C-e>`: 向上滚动屏幕
- `<C-y>`: 向下滚动屏幕

注意：在Vim的替换-确认模式下，键盘上的大多数按键都将失效。

### Tip 90 重复使用上次的查找模式 P.206
将查找域留空，能让Vim自动使用上一次查找模式。

> 执行 substitute 命令通常包括两个步骤：一是撰写查找模式，
> 二是设计和是的替换字符串。因此，一分为二的技术让我们消除了这两项任务的耦合性，
> 这才是关键所在。

上面这段话指明了进行**复杂**替换操作时的正确方法：一分为二，

#### 养成在查找域中填充内容（`<C-r>/`）
将查找域留空确实省事，但也带来了一个问题：会在命令历史中留下一条不完整的记录。
举例来说，我们想把下面一个句子中的 google 替换成 'Google`:

	google is a outstanding company.
我们可以用`:.,.s/google/Google/g`来完成，
下面我们用上面将的一分为二的方法走一遍：
我们先执行查询`/google<CR>`,这样查询历史窗口中会新增一条记录:

	/google
接下来，我们使用`:.,.//Google/g`完成替换，这时命令行窗口也会新增一条记录：

	.,.s//Google/g
也就是说，

> 将查找任务与替换任务分离，会导致这两组信息被单独存放，
> 从而导致当你再想重用之前的 substitute 命令时，会遇到困难。

解决方法就是，不留空，但也不重新输入，而是用`<C-r>/`命令调出模式内容，
这样做不但在命令行窗口保存了完整的记录，同时快捷键的效率也还行。

### Tip 91 用寄存器内容替换P.199
